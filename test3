function function1()
 sleep(1)
 print ("function1")
 sleep(5)
 print("function1 end")
end
function2 = function()
 sleep(3)
 print ("function2")
 sleep(2)
 print ("f2 end")
 function3()
end
function3 = function()
 print("function3 start")
 sleep(3)
 print("function3 end")
end
parallel.waitForAny (
  function1,
  function2)
print("primary end")
parallel.waitForAny (function1, function2)
print("secondary end")